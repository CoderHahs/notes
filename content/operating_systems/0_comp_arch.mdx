---
title: "Computer Architecture"
metaTitle: "Computer Architecture"
metaDescription: "Operating Systems - Computer Architecture"
---


# Computer System Architecture

# Main Components
- CPU(s)
- Main Memory (RAM/ROM), Cache Memory
- Memory Mapped IO device connected through common bus (PCIe) providing access using common interface and device controllers

[How a CPU Works](https://www.youtube.com/watch?v=cNN_tTXABUA)

# Instruction Set of a CPU

- **LOAD** a number form RAM into the CPU
- **ADD** two numbers together
- **STORE** a number form the CPU back out to RAM
- **COMPARE** one number with another
- **JUMP IF** *Condition*to another in RAM
- **JUMP** to another address in RAM
- **OUT** (put) to a device such as a monitor
- **IN** (put) from a device such as a keyboard

# Types of Processing Systems

## Single Process System
- connected by bus, and can only send one packet of data at a time. Only two devices can communicate at a time.

## Multi-processor systems
- Increase throughput
- Economy of scale
- Increased reliability
- Architecture
  - Asymmetric multiprocessing
    - Each processor assigned a specific task
  - Symmetric multiprocessing (SMP)
    - most common
    - All processors perform tasks within the OS

## Clusters, distributed systems
- computer subsystems interconnected via I/O components
- subsystems **do not** share resources via shared bus
- sharing a resource is more complicated!
  - requires co-operation of a subsystems
- subsystems co-operate to accomplish network-wide objective

# Storage Structure

## Primary storage (RAM)
- Main memory, directly accessible by the CPU
- Program must be in main memory in order to be executed
- Main memory usually not large enough to hold all programs and data
- Main memory is **volatile** - loses contents on power loss/reboot

## Secondary Storage (HDD, SSD)
- holds large quantities of data, permanently

# Input-Output Structure
- **Input-Output (IO) Controller**
  - has(memory) registers for accepting commands and transferring data (i.e. a-in, data-out, command, status)
- **Device driver** for each device that talks to the controller:
  - Provides uniform interface to operating system
  - Knows/hides details of controller/device from OS
- **IO Operation**
  - Device driver loads controller registers appropriately
  - Controller examines registers, executes I/O (read/write operations)
  - IO operations are similar to memory read/write
    - CPU write to output device
    - CPU read from input device
    - **Memory Mapped IO**

#### How does the driver know when the I/O completes?
- Periodically read a *status* register (polling)
  - called **direct IO**
  - low overhead if IO is fast
  - if IO is slow, CPU spends time *busy waiting*

#### How to deal with slow IO?
- Controller signal device driver raises and interrupts that I/O
has completed
  - Called **interrupt-driven IO**
  - More overhead, but gets rid of busy waiting
  - But this is too slow
- **Direct Memory Access (DMA)**
  - controller can talk directly with the memory
  - tell the controller to transfer block of data to/from memory
  - the controller raises interrupt when the whole transfer has completed

More info on DMA [here](https://www.youtube.com/watch?v=w3K1JklY6D4)

### DMA Operation

1. CPU writes DMA command to device then issue I/O request
2. Device writes DMA to memory
3. Device issues interrupt to CPU
